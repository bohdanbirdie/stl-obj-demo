{"version":3,"file":"index.cjs.js","sources":["../src/sheet.js","../src/index.js"],"sourcesContent":["/*\n\nhigh performance StyleSheet for css-in-js systems\n\n- uses multiple style tags behind the scenes for millions of rules\n- uses `insertRule` for appending in production for *much* faster performance\n- 'polyfills' on server side\n\n// usage\n\nimport StyleSheet from 'glamor/lib/sheet'\nlet styleSheet = new StyleSheet()\n\nstyleSheet.inject()\n- 'injects' the stylesheet into the page (or into memory if on server)\n\nstyleSheet.insert('#box { border: 1px solid red; }')\n- appends a css rule into the stylesheet\n\nstyleSheet.flush()\n- empties the stylesheet of all its contents\n\n*/\n\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    return tag.sheet\n  }\n\n  // this weirdness brought to you by firefox\n  for (let i = 0; i < document.styleSheets.length; i++) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      return document.styleSheets[i]\n    }\n  }\n}\n\nfunction makeStyleTag() {\n  let tag = document.createElement('style')\n  tag.type = 'text/css'\n  tag.setAttribute('data-emotion', '')\n  tag.appendChild(document.createTextNode(''))\n  document.head.appendChild(tag)\n  return tag\n}\n\nexport default class StyleSheet {\n  constructor() {\n    this.isBrowser = typeof window !== 'undefined'\n    this.isSpeedy = process.env.NODE_ENV === 'production' // the big drawback here is that the css won't be editable in devtools\n    this.tags = []\n    this.ctr = 0\n  }\n  inject() {\n    if (this.injected) {\n      throw new Error('already injected!')\n    }\n    if (this.isBrowser) {\n      this.tags[0] = makeStyleTag()\n    } else {\n      // server side 'polyfill'. just enough behavior to be useful.\n      this.sheet = []\n    }\n    this.injected = true\n  }\n  speedy(bool) {\n    if (this.ctr !== 0) {\n      // cannot change speedy mode after inserting any rule to sheet. Either call speedy(${bool}) earlier in your app, or call flush() before speedy(${bool})\n      throw new Error(`cannot change speedy now`)\n    }\n    this.isSpeedy = !!bool\n  }\n  insert(rule, sourceMap) {\n    if (this.isBrowser) {\n      // this is the ultrafast version, works across browsers\n      if (this.isSpeedy) {\n        const tag = this.tags[this.tags.length - 1]\n        const sheet = sheetForTag(tag)\n\n        try {\n          sheet.insertRule(rule, sheet.cssRules.length)\n        } catch (e) {\n          if (process.env.NODE_ENV !== 'production') {\n            console.warn('illegal rule', rule) // eslint-disable-line no-console\n          }\n        }\n      } else {\n        const tag = makeStyleTag()\n        this.tags.push(tag)\n        tag.appendChild(document.createTextNode(rule + (sourceMap || '')))\n      }\n      this.ctr++\n      if (this.ctr % 65000 === 0) {\n        this.tags.push(makeStyleTag())\n      }\n    } else {\n      // enough 'spec compliance' to be able to extract the rules later\n      // in other words, just the rule\n      this.sheet.push(rule)\n    }\n  }\n  flush() {\n    if (this.isBrowser) {\n      this.tags.forEach(tag => tag.parentNode.removeChild(tag))\n      this.tags = []\n      this.ctr = 0\n      // todo - look for remnants in document.styleSheets\n    } else {\n      // simpler on server\n      this.sheet = []\n    }\n    this.injected = false\n  }\n}\n","import {\n  hashString,\n  Stylis,\n  memoize,\n  unitless,\n  STYLES_KEY,\n  TARGET_KEY\n} from 'emotion-utils'\nimport stylisRuleSheet from 'stylis-rule-sheet'\nimport StyleSheet from './sheet'\n\nexport const sheet = new StyleSheet()\n\n// ðŸš€\nsheet.inject()\nconst stylisOptions = { keyframe: false }\n\nif (process.env.NODE_ENV !== 'production') {\n  stylisOptions.compress = false\n}\n\nlet stylis = new Stylis(stylisOptions)\n\nconst externalStylisPlugins = []\n\nconst use = stylis.use\n\nfunction insertRule(rule) {\n  sheet.insert(rule, currentSourceMap)\n}\n\nconst insertionPlugin = stylisRuleSheet(insertRule)\n\nexport const useStylisPlugin = plugin => {\n  externalStylisPlugins.push(plugin)\n  use(null)(externalStylisPlugins)(insertionPlugin)\n}\n\nexport let registered = {}\n\nexport let inserted = {}\n\nlet currentSourceMap = ''\n\nstylis.use(insertionPlugin)\n\nfunction handleInterpolation(\n  interpolation: any,\n  couldBeSelectorInterpolation: boolean\n) {\n  if (interpolation == null) {\n    return ''\n  }\n\n  switch (typeof interpolation) {\n    case 'boolean':\n      return ''\n    case 'function':\n      if (interpolation[STYLES_KEY] !== undefined) {\n        if (\n          process.env.NODE_ENV !== 'production' &&\n          interpolation[TARGET_KEY] === undefined\n        ) {\n          throw new Error(\n            'Component selectors can only be used in conjunction with babel-plugin-emotion.'\n          )\n        }\n\n        return `.${interpolation[TARGET_KEY]}`\n      }\n\n      return handleInterpolation.call(\n        this,\n        this === undefined\n          ? interpolation()\n          : interpolation(this.mergedProps, this.context),\n        couldBeSelectorInterpolation\n      )\n    case 'object':\n      return createStringFromObject.call(this, interpolation)\n    default:\n      const cached = registered[interpolation]\n      return couldBeSelectorInterpolation === false && cached !== undefined\n        ? cached\n        : interpolation\n  }\n}\n\nconst hyphenateRegex = /[A-Z]|^ms/g\n\nconst processStyleName = memoize(styleName =>\n  styleName.replace(hyphenateRegex, '-$&').toLowerCase()\n)\n\nconst processStyleValue = (key, value) => {\n  if (value === undefined || value === null || typeof value === 'boolean')\n    return ''\n\n  if (\n    unitless[key] !== 1 &&\n    key.charCodeAt(1) !== 45 && // custom properties\n    !isNaN(value) &&\n    value !== 0\n  ) {\n    return value + 'px'\n  }\n  return value\n}\n\nconst objectToStringCache = new WeakMap()\n\nfunction createStringFromObject(obj) {\n  if (objectToStringCache.has(obj)) {\n    return objectToStringCache.get(obj)\n  }\n  let string = ''\n\n  if (Array.isArray(obj)) {\n    obj.forEach(function(interpolation) {\n      string += handleInterpolation.call(this, interpolation, false)\n    }, this)\n  } else {\n    Object.keys(obj).forEach(function(key) {\n      if (typeof obj[key] !== 'object') {\n        if (registered[obj[key]] !== undefined) {\n          string += `${key}{${registered[obj[key]]}}`\n        } else {\n          string += `${processStyleName(key)}:${processStyleValue(\n            key,\n            obj[key]\n          )};`\n        }\n      } else {\n        string += `${key}{${handleInterpolation.call(this, obj[key], false)}}`\n      }\n    }, this)\n  }\n  objectToStringCache.set(obj, string)\n\n  return string\n}\n\nfunction isLastCharDot(string) {\n  return string.charCodeAt(string.length - 1) === 46 // .\n}\n\nlet hash\nlet name\n\nconst labelPattern = /label:\\s*([^\\s;\\n]+)\\s*[;\\n]/g\n\nfunction createStyles(strings, ...interpolations) {\n  let stringMode = true\n  let styles = ''\n  let identifierName = ''\n\n  if (strings == null || strings.raw === undefined) {\n    stringMode = false\n    styles = handleInterpolation.call(this, strings, false)\n  } else {\n    styles = strings[0]\n  }\n\n  interpolations.forEach(function(interpolation, i) {\n    styles += handleInterpolation.call(\n      this,\n      interpolation,\n      isLastCharDot(styles)\n    )\n    if (stringMode === true && strings[i + 1] !== undefined) {\n      styles += strings[i + 1]\n    }\n  }, this)\n  styles = styles.replace(labelPattern, (match, p1) => {\n    identifierName += `-${p1}`\n    return ''\n  })\n  hash = hashString(styles + identifierName)\n  name = hash + identifierName\n  return styles\n}\n\nif (process.env.NODE_ENV !== 'production') {\n  const sourceMapRegEx = /\\/\\*#\\ssourceMappingURL=data:application\\/json;\\S+\\s+\\*\\//\n  const oldStylis = stylis\n  stylis = (selector, styles) => {\n    const result = sourceMapRegEx.exec(styles)\n    currentSourceMap = result ? result[0] : ''\n    oldStylis(selector, styles)\n    currentSourceMap = ''\n  }\n}\n\nexport function css() {\n  const styles = createStyles.apply(this, arguments)\n  const selector = `css-${name}`\n\n  if (registered[selector] === undefined) {\n    registered[selector] = styles\n  }\n\n  if (inserted[hash] === undefined) {\n    stylis(`.${selector}`, styles)\n    inserted[hash] = true\n  }\n\n  return selector\n}\n\nexport function keyframes() {\n  const styles = createStyles.apply(this, arguments)\n  const animation = `animation-${name}`\n\n  if (inserted[hash] === undefined) {\n    stylis('', `@keyframes ${animation}{${styles}}`)\n    inserted[hash] = true\n  }\n  return animation\n}\n\nexport function injectGlobal() {\n  const styles = createStyles.apply(this, arguments)\n  if (inserted[hash] === undefined) {\n    stylis('', styles)\n    inserted[hash] = true\n  }\n}\n\nexport function fontFace(...args) {\n  const styles = createStyles(...args)\n  if (inserted[hash] === undefined) {\n    stylis('', `@font-face{${styles}}`)\n    inserted[hash] = true\n  }\n}\n\nexport function getRegisteredStyles(registeredStyles, classNames) {\n  let rawClassName = ''\n\n  classNames.split(' ').forEach(className => {\n    if (registered[className] !== undefined) {\n      registeredStyles.push(className)\n    } else {\n      rawClassName += `${className} `\n    }\n  })\n  return rawClassName\n}\n\nexport function merge(className, sourceMap) {\n  const registeredStyles = []\n\n  const rawClassName = getRegisteredStyles(registeredStyles, className)\n\n  if (registeredStyles.length < 2) {\n    return className\n  }\n  return rawClassName + css(registeredStyles, sourceMap)\n}\n\nfunction classnames() {\n  let len = arguments.length\n  let i = 0\n  let cls = ''\n  for (; i < len; i++) {\n    let arg = arguments[i]\n\n    if (arg == null) continue\n    let next = (cls && cls + ' ') || cls\n\n    switch (typeof arg) {\n      case 'boolean':\n        break\n      case 'function':\n        cls = next + classnames(arg())\n        break\n      case 'object': {\n        if (Array.isArray(arg)) {\n          cls = next + classnames.apply(null, arg)\n        } else {\n          for (const k in arg) {\n            if (arg[k]) {\n              cls && (cls += ' ')\n              cls += k\n            }\n          }\n        }\n        break\n      }\n      default: {\n        cls = next + arg\n      }\n    }\n  }\n  return cls\n}\n\nexport function cx(...classNames) {\n  return merge(classnames(...classNames))\n}\n\nexport function hydrate(ids) {\n  ids.forEach(id => {\n    inserted[id] = true\n  })\n}\n\nexport function flush() {\n  sheet.flush()\n  inserted = {}\n  registered = {}\n  sheet.inject()\n}\n"],"names":["sheetForTag","tag","sheet","i","document","styleSheets","length","ownerNode","makeStyleTag","createElement","type","setAttribute","appendChild","createTextNode","head","StyleSheet","isBrowser","window","isSpeedy","process","env","NODE_ENV","tags","ctr","inject","injected","Error","speedy","bool","insert","rule","sourceMap","insertRule","cssRules","e","warn","push","flush","forEach","parentNode","removeChild","stylisOptions","compress","stylis","Stylis","externalStylisPlugins","use","currentSourceMap","insertionPlugin","stylisRuleSheet","useStylisPlugin","plugin","registered","inserted","handleInterpolation","interpolation","couldBeSelectorInterpolation","STYLES_KEY","undefined","TARGET_KEY","call","mergedProps","context","createStringFromObject","cached","hyphenateRegex","processStyleName","memoize","styleName","replace","toLowerCase","processStyleValue","key","value","unitless","charCodeAt","isNaN","objectToStringCache","WeakMap","obj","has","get","string","Array","isArray","keys","set","isLastCharDot","hash","name","labelPattern","createStyles","strings","stringMode","styles","identifierName","raw","interpolations","match","p1","hashString","sourceMapRegEx","oldStylis","selector","result","exec","css","apply","arguments","keyframes","animation","injectGlobal","fontFace","getRegisteredStyles","registeredStyles","classNames","rawClassName","split","className","merge","classnames","len","cls","arg","next","k","cx","hydrate","ids","id"],"mappings":"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"}